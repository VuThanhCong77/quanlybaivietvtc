<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title id="pageTitle">So·∫°n th·∫£o b√†i vi·∫øt</title>
<script>
// --- ADMIN ACCESS CONTROL ---
const ADMIN_PASSWORD = "admin123"; // M·∫≠t kh·∫©u qu·∫£n tr·ªã

function checkAdmin() {
    return sessionStorage.getItem('isAdmin') === 'true';
}

function setAdminSession() {
    const password = prompt("Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u qu·∫£n tr·ªã:");
    if (password === ADMIN_PASSWORD) {
        sessionStorage.setItem('isAdmin', 'true');
        return true;
    } else if (password !== null) {
        alert("M·∫≠t kh·∫©u sai.");
    }
    return false;
}
// --- END ADMIN ACCESS CONTROL ---

// KI·ªÇM TRA QUY·ªÄN TRUY C·∫¨P TRANG SO·∫†N TH·∫¢O
if (!checkAdmin()) {
    alert("B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p trang so·∫°n th·∫£o.");
    if (setAdminSession()) {
        // ƒêƒÉng nh·∫≠p th√†nh c√¥ng, t·∫£i l·∫°i trang ƒë·ªÉ t·∫£i d·ªØ li·ªáu ch·ªânh s·ª≠a (n·∫øu c√≥)
        location.reload(); 
    } else {
        // ƒêƒÉng nh·∫≠p th·∫•t b·∫°i ho·∫∑c h·ªßy b·ªè
        location.href="trangchu.html";
    }
}

// L·∫•y ID b√†i vi·∫øt t·ª´ URL n·∫øu ƒëang ·ªü ch·∫ø ƒë·ªô ch·ªânh s·ª≠a
const urlParams = new URLSearchParams(location.search);
const postIdToEdit = urlParams.get('id');

// C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ trang n·∫øu ƒëang ch·ªânh s·ª≠a
if (postIdToEdit) {
    document.getElementById('pageTitle').innerText = 'Ch·ªânh s·ª≠a b√†i vi·∫øt';
}

// Helper function s·ª≠ d·ª•ng Promise ƒë·ªÉ ƒë·ªçc file (·∫¢nh ƒë·∫°i di·ªán, T·ªáp t√†i li·ªáu)
function readFileAsDataURL(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = (e) => resolve(e.target.result);
        reader.onerror = (e) => reject(new Error("L·ªói khi ƒë·ªçc file."));
        reader.readAsDataURL(file);
    });
}

// =================================================================
// === C√ÅC H√ÄM ƒê·ªäNH D·∫†NG (GI·ªÆ NGUY√äN) ===
// =================================================================
function formatText(command, value = null) {
    document.execCommand(command, false, value);
    document.getElementById('content-area').focus();
}

function applyBlockStyle(styleProperty, styleValue) {
    const selection = window.getSelection();
    if (selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        let node = range.commonAncestorContainer;

        while (node && node.nodeType !== 1 && node.parentNode) {
            node = node.parentNode;
        }

        const contentArea = document.getElementById('content-area');
        if (node && contentArea.contains(node)) {
            if (node.nodeName === '#text' && node.parentNode.id === 'content-area') {
                const p = document.createElement('p');
                node.parentNode.insertBefore(p, node);
                p.appendChild(node);
                node = p;
            }
            
            node.style[styleProperty] = styleValue;
            contentArea.focus(); 
        } else {
             alert("Vui l√≤ng ƒë·∫∑t con tr·ªè v√†o ƒëo·∫°n vƒÉn b·∫£n mu·ªën √°p d·ª•ng ƒë·ªãnh d·∫°ng.");
        }
    }
}

function indentParagraph() {
    applyBlockStyle('text-indent', '20px');
}

function insertTable() {
    const rows = prompt("Nh·∫≠p s·ªë h√†ng (v√≠ d·ª•: 3):", "3");
    const cols = prompt("Nh·∫≠p s·ªë c·ªôt (v√≠ d·ª•: 4):", "4");
    
    if (!rows || !cols || isNaN(rows) || isNaN(cols)) {
        alert("S·ªë h√†ng v√† c·ªôt kh√¥ng h·ª£p l·ªá.");
        return;
    }

    let tableHTML = '<table class="styled-table"><thead><tr>';
    for (let c = 0; c < parseInt(cols); c++) {
        tableHTML += '<th>Ti√™u ƒë·ªÅ C·ªôt ' + (c + 1) + '</th>';
    }
    tableHTML += '</tr></thead><tbody>';
    
    for (let r = 0; r < parseInt(rows); r++) {
        tableHTML += '<tr>';
        for (let c = 0; c < parseInt(cols); c++) {
            tableHTML += '<td>D·ªØ li·ªáu ' + (r + 1) + '-' + (c + 1) + '</td>';
        }
        tableHTML += '</tr>';
    }
    tableHTML += '</tbody></table><p></p>'; 
    formatText('insertHTML', tableHTML);
}


// =================================================================
// === LOGIC CH√àN ·∫¢NH V√ÄO N·ªòI DUNG (FILE UPLOAD) ===
// =================================================================
function insertImage() {
    document.getElementById('contentImageFile').click();
}

function insertLink() {
    const url = prompt("Nh·∫≠p URL c·ªßa trang:");
    if (url) {
        formatText('createLink', url);
    }
}


// =================================================================
// === LOGIC L∆ØU/C·∫¨P NH·∫¨T B√ÄI VI·∫æT (C√ì X·ª¨ L√ù 3 FILE V√Ä CH·ªàNH S·ª¨A) ===
// =================================================================
async function savePost(){
  const contentArea = document.getElementById('content-area');
  const contentHTML = contentArea.innerHTML.trim();
  const imageInput = document.getElementById('image');
  const documentInput = document.getElementById('documentFile'); 
  const categorySelect = document.getElementById('category');

  if (!title.value || !shortDescription.value || !contentHTML) {
    alert("Ch∆∞a nh·∫≠p ƒë·ªß n·ªôi dung (Ti√™u ƒë·ªÅ, ƒêo·∫°n ƒë·∫ßu b√†i v√† N·ªôi dung)");
    return;
  }
  
  // R√†ng bu·ªôc: N·∫øu l√† chuy√™n m·ª•c "T√†i li·ªáu" m√† ch∆∞a c√≥ file, ph·∫£i ch·ªçn file (Ch·ªâ ki·ªÉm tra khi t·∫°o m·ªõi)
  if (categorySelect.value === "tailieu" && !postIdToEdit && documentInput.files.length === 0) {
      alert("Vui l√≤ng ch·ªçn t·ªáp t√†i li·ªáu khi chuy√™n m·ª•c l√† 'T√†i li·ªáu'.");
      return;
  }
  
  // T·∫£i d·ªØ li·ªáu b√†i vi·∫øt hi·ªán t·∫°i (n·∫øu ƒëang ch·ªânh s·ª≠a)
  let currentPost = {};
  if (postIdToEdit) {
      const posts = JSON.parse(localStorage.getItem("posts") || "[]");
      currentPost = posts.find(p => p.id == postIdToEdit) || {};
  }


  try {
      // B·∫Øt ƒë·∫ßu v·ªõi d·ªØ li·ªáu file hi·ªán t·∫°i (n·∫øu ƒëang s·ª≠a)
      let thumbnailBase64 = currentPost.thumbnail || null;
      let fileData = currentPost.fileData || null; 
      let fileName = currentPost.fileName || null; 
      let fileMimeType = currentPost.fileMimeType || null; 

      // 1. ƒê·ªçc/Ghi ƒë√® ·∫£nh ƒë·∫°i di·ªán (Thumbnail) n·∫øu c√≥ file m·ªõi ƒë∆∞·ª£c ch·ªçn
      if (imageInput.files.length > 0) {
          thumbnailBase64 = await readFileAsDataURL(imageInput.files[0]);
      }

      // 2. ƒê·ªçc/Ghi ƒë√® t·ªáp t√†i li·ªáu (Document) n·∫øu c√≥ file m·ªõi ƒë∆∞·ª£c ch·ªçn
      // Ho·∫∑c x√≥a file n·∫øu chuy·ªÉn kh·ªèi chuy√™n m·ª•c "tailieu"
      if (categorySelect.value === "tailieu" && documentInput.files.length > 0) {
          const docFile = documentInput.files[0];
          fileData = await readFileAsDataURL(docFile);
          fileName = docFile.name;
          fileMimeType = docFile.type;
      } else if (categorySelect.value !== "tailieu") {
          // X√≥a d·ªØ li·ªáu file n·∫øu kh√¥ng c√≤n l√† chuy√™n m·ª•c t√†i li·ªáu
          fileData = null;
          fileName = null;
          fileMimeType = null;
      }
      // L∆∞u d·ªØ li·ªáu
      saveData(contentHTML, thumbnailBase64, fileData, fileName, fileMimeType, currentPost.id);

  } catch (error) {
      alert(error.message || "L·ªói kh√¥ng x√°c ƒë·ªãnh khi x·ª≠ l√Ω file.");
  }
}

function saveData(contentHTML, thumbnailBase64, fileData, fileName, fileMimeType, existingId) {
    // T·∫°o ƒë·ªëi t∆∞·ª£ng b√†i vi·∫øt
    const post = {
      id: existingId || Date.now(), // S·ª≠ d·ª•ng ID hi·ªán t·∫°i n·∫øu c√≥, kh√¥ng th√¨ t·∫°o m·ªõi
      title: title.value,
      shortDescription: shortDescription.value,
      category: category.value,
      content: contentHTML,
      thumbnail: thumbnailBase64,
      fileData: fileData, 
      fileName: fileName, 
      fileMimeType: fileMimeType, 
      date: new Date().toLocaleDateString("vi-VN")
    };

    let posts = JSON.parse(localStorage.getItem("posts") || "[]");
    
    if (existingId) {
        // Ch·∫ø ƒë·ªô C·∫¨P NH·∫¨T
        const postIndex = posts.findIndex(p => p.id == existingId);
        if (postIndex > -1) {
            // C·∫≠p nh·∫≠t b√†i vi·∫øt t·∫°i v·ªã tr√≠ c≈©, gi·ªØ nguy√™n th·ª© t·ª±
            posts[postIndex] = post; 
            alert("ƒê√£ C·∫¨P NH·∫¨T b√†i vi·∫øt!");
        } else {
            // Tr∆∞·ªùng h·ª£p kh√¥ng t√¨m th·∫•y ID c≈© (n√™n th√™m v√†o ƒë·∫ßu)
            posts.unshift(post);
            alert("ƒê√£ l∆∞u b√†i m·ªõi (ID c≈© kh√¥ng t√¨m th·∫•y)!");
        }
    } else {
        // Ch·∫ø ƒë·ªô T·∫†O M·ªöI
        posts.unshift(post);
        alert("ƒê√£ l∆∞u b√†i m·ªõi!");
    }

    localStorage.setItem("posts", JSON.stringify(posts));

    // Sau khi l∆∞u, chuy·ªÉn h∆∞·ªõng v·ªÅ trang chi ti·∫øt (ho·∫∑c trang ch·ªß n·∫øu kh√¥ng c√≥ ID c≈©)
    const redirectUrl = existingId ? `post.html?id=${existingId}` : 'trangchu.html';
    location.href = redirectUrl;
}

/**
 * T·∫£i d·ªØ li·ªáu b√†i vi·∫øt v√†o form khi ch·ªânh s·ª≠a
 */
function loadPostForEdit() {
    if (!postIdToEdit) return; // Ch·ªâ th·ª±c thi n·∫øu c√≥ ID

    const posts = JSON.parse(localStorage.getItem("posts") || "[]");
    const post = posts.find(p => p.id == postIdToEdit);
    
    if (post) {
        document.getElementById('title').value = post.title;
        document.getElementById('category').value = post.category;
        document.getElementById('shortDescription').value = post.shortDescription;
        document.getElementById('content-area').innerHTML = post.content;
        
        // C·∫≠p nh·∫≠t n√∫t save
        document.getElementById('saveButton').innerText = 'C·∫¨P NH·∫¨T B√ÄI VI·∫æT';

        // Hi·ªÉn th·ªã th√¥ng b√°o file hi·ªán t·∫°i (n·∫øu c√≥)
        const fileInfoDiv = document.getElementById('currentFileInfo');
        if (post.fileName) {
            fileInfoDiv.innerHTML = `<small style="color: green;">T·ªáp t√†i li·ªáu hi·ªán t·∫°i: **${post.fileName}** (Ch·ªçn t·ªáp m·ªõi n·∫øu mu·ªën thay th·∫ø).</small>`;
            fileInfoDiv.style.display = 'block';
        } else {
            fileInfoDiv.style.display = 'none';
        }
    } else {
        alert("Kh√¥ng t√¨m th·∫•y b√†i vi·∫øt ƒë·ªÉ ch·ªânh s·ª≠a.");
        history.replaceState(null, '', location.pathname);
    }
}


/**
 * X√≥a m·ªôt b√†i vi·∫øt d·ª±a tr√™n ID 
 */
function deletePost(postId) {
    if (!confirm("B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a b√†i vi·∫øt n√†y?")) return;

    let posts = JSON.PARSE(localStorage.getItem("posts") || "[]");
    const newPosts = posts.filter(p => p.id != postId);
    localStorage.setItem("posts", JSON.stringify(newPosts));
    alert("ƒê√£ x√≥a b√†i vi·∫øt!");
    location.reload(); 
}


// =================================================================
// === LOGIC SAO L∆ØU V√Ä PH·ª§C H·ªíI D·ªÆ LI·ªÜU (Gi·ªØ nguy√™n) ===
// =================================================================

function backupPosts() {
    const postsJson = localStorage.getItem("posts");
    
    if (!postsJson || JSON.parse(postsJson).length === 0) {
        alert("Kh√¥ng c√≥ b√†i vi·∫øt n√†o ƒë·ªÉ sao l∆∞u.");
        return;
    }

    const postsData = JSON.parse(postsJson);
    const fileName = `posts_backup_${new Date().toISOString().slice(0, 10)}.json`;
    
    const blob = new Blob([JSON.stringify(postsData, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = fileName;
    document.body.appendChild(a);
    a.click();
    
    document.body.removeChild(a);
    URL.revokeObjectURL(url);

    alert("ƒê√£ sao l∆∞u d·ªØ li·ªáu th√†nh c√¥ng!");
}

function restorePosts() {
    const fileInput = document.getElementById('restoreFile');
    const file = fileInput.files[0];

    if (!file) return;

    if (!confirm("C·∫¢NH B√ÅO: Thao t√°c n√†y s·∫Ω GHI ƒê√à d·ªØ li·ªáu b√†i vi·∫øt hi·ªán t·∫°i trong tr√¨nh duy·ªát c·ªßa b·∫°n. B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ph·ª•c h·ªìi kh√¥ng?")) {
        fileInput.value = '';
        return;
    }

    const reader = new FileReader();

    reader.onload = function(e) {
        try {
            const importedPosts = JSON.parse(e.target.result);
            
            if (!Array.isArray(importedPosts)) {
                alert("L·ªói: File ƒë√£ ch·ªçn kh√¥ng ph·∫£i l√† ƒë·ªãnh d·∫°ng JSON c·ªßa danh s√°ch b√†i vi·∫øt.");
                fileInput.value = '';
                return;
            }

            localStorage.setItem("posts", JSON.stringify(importedPosts));
            
            alert("Ph·ª•c h·ªìi d·ªØ li·ªáu th√†nh c√¥ng! Trang s·∫Ω t·∫£i l·∫°i ƒë·ªÉ c·∫≠p nh·∫≠t.");
            location.reload();

        } catch (error) {
            alert("L·ªói khi ƒë·ªçc ho·∫∑c x·ª≠ l√Ω file JSON. Vui l√≤ng ki·ªÉm tra l·∫°i file sao l∆∞u.");
            fileInput.value = '';
        }
    };

    reader.onerror = function() {
        alert("L·ªói khi ƒë·ªçc file.");
        fileInput.value = '';
    };

    reader.readAsText(file);
}

// =================================================================
// === HI·ªÇN TH·ªä DANH S√ÅCH B√ÄI VI·∫æT C√ì N√öT X√ìA (Gi·ªØ nguy√™n) ===
// =================================================================

function loadDeleteList() {
    const listContainer = document.getElementById('delete-list');
    if (!listContainer) return;

    const posts = JSON.parse(localStorage.getItem("posts") || "[]");
    
    if (posts.length === 0) {
        listContainer.innerHTML = '<p style="font-style: italic; color: #666;">Ch∆∞a c√≥ b√†i vi·∫øt n√†o ƒë∆∞·ª£c l∆∞u.</p>';
        return;
    }

    let listHTML = '<ul>';
    posts.forEach(p => {
        listHTML += `
            <li>
                <span class="post-title-delete">${p.title}</span> 
                (Chuy√™n m·ª•c: ${p.category}) 
                <button class="edit-btn-inline" onclick="location.href='soanbai.html?id=${p.id}'">‚úç S·ª≠a</button>
                <button class="delete-btn-inline" onclick="deletePost(${p.id})">üóë X√≥a</button>
            </li>
        `;
    });
    listHTML += '</ul>';
    
    listContainer.innerHTML = listHTML;
}

// =================================================================
// === LOGIC KH·ªûI T·∫†O TRANG ===
// =================================================================
document.addEventListener('DOMContentLoaded', () => {
    // 1. Logic ch√®n ·∫£nh v√†o n·ªôi dung
    const contentImageFile = document.getElementById('contentImageFile');
    if (contentImageFile) {
        contentImageFile.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const file = this.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const imgHTML = `<img src="${e.target.result}" style="max-width:100%; height:auto; display:block; margin: 10px auto;">`;
                    formatText('insertHTML', imgHTML);
                    contentImageFile.value = ''; 
                };

                reader.readAsDataURL(file);
            }
        });
    }
    
    // 2. Load danh s√°ch x√≥a
    loadDeleteList();
    
    // 3. Load b√†i vi·∫øt n·∫øu ƒëang ch·ªânh s·ª≠a
    loadPostForEdit(); 
});

</script>

<style>
/* CSS (Gi·ªØ nguy√™n) */
body{font-family:Arial; max-width:900px; margin:auto; padding-bottom: 50px;}
input, select, button, #toolbar button, #toolbar select, textarea{
    width: 100%; 
    margin: 6px 0; 
    padding: 8px;
    box-sizing: border-box;
}

textarea#shortDescription {
    height: 70px;
    resize: vertical;
}

/* === THANH C√îNG C·ª§ === */
#toolbar {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 10px;
    width: 100%;
    border: 1px solid #ccc;
    padding: 5px;
    box-sizing: border-box;
    background: #f7f7f7;
}

#toolbar button, #toolbar select {
    width: auto; 
    flex-grow: 1; 
    margin: 0;
    padding: 5px 10px;
    cursor: pointer;
    background: #fff;
    border: 1px solid #ddd;
}
#toolbar button:hover { background: #eee; }

#content-area {
    min-height: 200px;
    border: 1px solid #ccc;
    padding: 10px;
    margin-top: 6px;
    outline: none;
    background-color: #fff;
    word-wrap: break-word;
}

/* === KHU V·ª∞C SAO L∆ØU/PH·ª§C H·ªíI === */
#backup-restore-section {
    margin-top: 30px;
    padding: 15px;
    border: 1px dashed #0a7f99;
    border-radius: 8px;
    background: #eaf8ff;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}
#backup-restore-section h3, #backup-restore-section p {
    width: 100%;
    margin: 0 0 10px 0;
}
.backup-btn, .restore-btn {
    width: 48%; 
    margin: 5px 0; 
    padding: 10px;
    font-weight: bold;
    cursor: pointer;
    box-sizing: border-box;
    border-radius: 4px;
}
.backup-btn {
    background: #2ecc71;
    color: white;
    border: none;
}
.restore-btn {
    background: #3498db;
    color: white;
    border: none;
}
.backup-btn:hover { background: #27ae60; }
.restore-btn:hover { background: #2980b9; }

/* === DANH S√ÅCH X√ìA & S·ª¨A NHANH === */
#delete-list-section {
    margin-top: 40px;
    border-top: 2px solid #0a7f99;
    padding-top: 20px;
}

#delete-list ul {
    list-style: none;
    padding: 0;
}

#delete-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    margin-bottom: 5px;
    border: 1px solid #eee;
    background: #fff;
    border-radius: 4px;
}

.post-title-delete {
    font-weight: bold;
    color: #0a3a5a;
    flex-grow: 1;
    margin-right: 15px;
}

.delete-btn-inline {
    background: #e74c3c;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
    width: auto;
    margin: 0 0 0 5px;
}
.delete-btn-inline:hover {
    background: #c0392b;
}

/* N√∫t S·ª≠a nhanh */
.edit-btn-inline {
    background: #f39c12; 
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
    width: auto;
    margin: 0;
}
.edit-btn-inline:hover {
    background: #e67e22;
}

/* --- CSS ƒê·ªãnh d·∫°ng B·∫£ng ƒê·∫πp M·∫Øt (Gi·ªØ nguy√™n) --- */
#content-area .styled-table {
    border-collapse: collapse;
    margin: 25px 0;
    font-size: 0.9em;
    font-family: sans-serif;
    min-width: 400px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
    width: 100%;
}
#content-area .styled-table thead tr { background-color: #009879; color: #ffffff; text-align: left; }
#content-area .styled-table th, #content-area .styled-table td { padding: 12px 15px; border: 1px solid #dddddd; }
#content-area .styled-table tbody tr { border-bottom: 1px solid #dddddd; }
#content-area .styled-table tbody tr:nth-of-type(even) { background-color: #f3f3f3; }
#content-area .styled-table tbody tr:last-of-type { border-bottom: 2px solid #009879; }
</style>
</head>
<body>

<h2 id="formTitle">So·∫°n th·∫£o b√†i vi·∫øt</h2>

<label for="title">Ti√™u ƒë·ªÅ</label>
<input id="title">

<label for="category">Chuy√™n m·ª•c</label>
<select id="category">
  <option value="baiviet">B√†i vi·∫øt</option>
  <option value="tintuc">Tin t·ª©c</option>
  <option value="tailieu">T√†i li·ªáu</option>
</select>

<label for="shortDescription">ƒêo·∫°n ƒë·∫ßu b√†i (M√¥ t·∫£ ng·∫Øn - 3 ƒë·∫øn 5 d√≤ng)</label>
<textarea id="shortDescription"></textarea>


<label>N·ªôi dung</label>

<div id="toolbar">
  <select onchange="formatText('fontName', this.value)">
    <option value="">Ph√¥ng ch·ªØ</option>
    <option value="Arial">Arial</option>
    <option value="Verdana">Verdana</option>
    <option value="Times New Roman">Times New Roman</option>
  </select>
  
  <button onclick="formatText('justifyLeft')">CƒÉn tr√°i</button>
  <button onclick="formatText('justifyCenter')">CƒÉn gi·ªØa</button>
  <button onclick="formatText('justifyRight')">CƒÉn ph·∫£i</button>
  <button onclick="formatText('justifyFull')">CƒÉn ƒë·ªÅu</button>

  <button onclick="indentParagraph()">L√πi ƒë·∫ßu d√≤ng 2cm</button>
  
  <button onclick="insertTable()">Ch√®n B·∫£ng</button>
  
  <button onclick="insertImage()">Ch√®n ·∫£nh</button>
  <button onclick="insertLink()">Ch√®n Link</button>
  
  <button onclick="formatText('bold')">B</button>
  <button onclick="formatText('italic')">I</button>
  <button onclick="formatText('underline')">U</button>
</div>

<input type="file" id="contentImageFile" accept="image/*" style="display:none;">

<div id="content-area" contenteditable="true">
  B·∫Øt ƒë·∫ßu so·∫°n th·∫£o n·ªôi dung t·∫°i ƒë√¢y...
</div>

<label for="image">·∫¢nh ƒë·∫°i di·ªán (Ch·ªçn file m·ªõi ƒë·ªÉ thay th·∫ø)</label>
<input type="file" id="image" accept="image/*">

<label for="documentFile" style="font-weight: bold; color: #0a7f99;">T·ªáp T√†i li·ªáu (PDF, Word, Excel, PPT...) - Ch·ªçn file m·ªõi ƒë·ªÉ thay th·∫ø</label>
<div id="currentFileInfo" style="margin-bottom: 8px;"></div>
<input type="file" id="documentFile" accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx">

<button onclick="savePost()" id="saveButton">L∆∞u b√†i</button>

<button onclick="location.href = 'trangchu.html'">Xem danh s√°ch b√†i vi·∫øt</button>

<div id="backup-restore-section">
    <h3>Sao l∆∞u & Ph·ª•c h·ªìi D·ªØ li·ªáu</h3>
    <button onclick="backupPosts()" class="backup-btn">üíæ Xu·∫•t D·ªØ li·ªáu (Sao l∆∞u)</button>
    <input type="file" id="restoreFile" style="display:none;" accept=".json" onchange="restorePosts()">
    <button onclick="document.getElementById('restoreFile').click()" class="restore-btn">üîÑ Nh·∫≠p D·ªØ li·ªáu (Ph·ª•c h·ªìi)</button>
    <p><small style="color: #666; font-style: italic; width: 100%; margin-top: 10px;">L∆∞u √Ω: Ph·ª•c h·ªìi s·∫Ω GHI ƒê√à d·ªØ li·ªáu b√†i vi·∫øt hi·ªán t·∫°i.</small></p>
</div>

<div id="delete-list-section">
    <h3>Danh s√°ch B√†i vi·∫øt ƒë√£ L∆∞u (Qu·∫£n l√Ω s·ª≠a/x√≥a nhanh)</h3>
    <div id="delete-list">
        </div>
</div>

</body>
</html>