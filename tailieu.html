<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kho T√†i Li·ªáu | T√™n Trang</title>

<style>
/* === RESET & C∆† B·∫¢N === */
body { margin: 0; font-family: Arial, sans-serif; background: #ffffff; color: #0a3a5a; line-height: 1.6; }
header.site-header { background: linear-gradient(to right, #0a7f99, #0ab3c9); color: #fff; padding: 15px 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);}
header.site-header h1 { font-size: 24px; margin: 0; line-height: 1.2; }
main { max-width: 900px; margin: auto; padding: 20px; background-color: #f9f9ff; border-radius: 12px; box-shadow: 0 4px 15px rgba(10, 127, 153, 0.1); }
.file-item { border-bottom: 1px solid #cde7ef; padding: 15px 0; display: flex; justify-content: space-between; align-items: center; }
.file-item:last-child { border-bottom: none; }
.file-info { max-width: 75%; }
.file-info h3 { margin: 0; font-size: 18px; }
.file-info h3 a { color: #0a3a5a; text-decoration: none; }
.file-info h3 a:hover { color: #0a7f99; }
.file-info p { margin-top: 6px; font-size: 14px; color: #08405d; }
.download-btn { padding: 8px 16px; background: #0a7f99; color: #fff; text-decoration: none; border-radius: 6px; font-size: 14px; transition: background 0.3s; }
.download-btn:hover { background: #0a99aa; }
footer { background: #e7f5fa; padding: 20px; margin-top: 40px; text-align: center; font-size: 14px; color: #074055; }
</style>
</head>

<body>

<header class="site-header">
  <h1>KHO T√ÄI LI·ªÜU</h1>
</header>

<a href="index.html"
   style="display:inline-block; margin:6px 6px 0 6px; background:#0a7f99;color:#fff;padding:10px 18px;border-radius:6px;text-decoration:none;font-weight:bold;">
   Trang ch·ªßüöÄ
</a>

  <a like="vanban/HDsudung.pdf"
   style="display:inline-block; margin:6px 6px 0 6px; background:#0a7f99;color:#fff;padding:10px 18px;border-radius:6px;text-decoration:none;font-weight:bold;">
   H∆∞·ªõng d·∫´n s·ª≠ d·ª•ngüöÄ
</a>
<main id="document-list">
  <p style="text-align: center; color: #aaa; padding: 20px;">ƒêang t·∫£i d·ªØ li·ªáu...</p>
</main>

<footer>
  üöÄ C√¥ng ngh·ªá ph·ª•c v·ª• s·ª± ph√°t tri·ªÉn, c√¥ng b·∫±ng v√† t·ª± do<br/>
</footer>

<script>
    const JSON_URL = 'posts_data.json'; 

    async function fetchPosts() {
        try {
            const response = await fetch(JSON_URL);
            if (!response.ok) {
                console.error("Kh√¥ng t√¨m th·∫•y file posts_data.json.");
                return [];
            }
            return await response.json();
        } catch (error) {
            console.error("L·ªói m·∫°ng khi t·∫£i d·ªØ li·ªáu b√†i vi·∫øt:", error);
            return [];
        }
    }

    async function loadDocuments() {
        const mainContent = document.getElementById("document-list");

        const posts = await fetchPosts();

        // L·ªçc b√†i vi·∫øt c√≥ category l√† "tailieu" V√Ä c√≥ d·ªØ li·ªáu file (fileData)
        const documentPosts = posts.filter(p => p.category === "tailieu" && p.fileData); 
        
        if (documentPosts.length === 0) {
            mainContent.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">Hi·ªán ch∆∞a c√≥ t√†i li·ªáu n√†o.</p>';
            return;
        }
        
        mainContent.innerHTML = ''; 

        documentPosts.forEach(p => {
            mainContent.innerHTML += `
                <div class="file-item">
                    <div class="file-info">
                        <h3><a href="post.html?id=${p.id}">${p.title}</a></h3>
                        <p>${p.shortDescription || 'Kh√¥ng c√≥ m√¥ t·∫£ ng·∫Øn.'}</p>
                    </div>
                    <a class="download-btn" href="${p.fileData}" download="${p.fileName || 'document'}">T·∫£i xu·ªëng</a>
                </div>
            `;
        });
    }

    // Ch·∫°y h√†m khi trang t·∫£i xong
    document.addEventListener('DOMContentLoaded', loadDocuments);
</script>
</body>
</html>
